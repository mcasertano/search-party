(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(74)},51:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),o=a(2),s=a(40),l=a(8),u=a(9),m=a(11),d=a(10),p=a(12),f=a(13),h=function(e){return function(t){return{type:"SET_MODAL",modal:e,value:t}}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return function(a){return Object(f.a)({type:"SET_"+e},t,a)}},v=E("SIDEBAR"),b=(E("NAME"),E("PAGE","page")),g=h("create"),N=h("scan_qr"),S=h("share_code"),O=h("person_info"),y=(a(51),a(4)),j=a(18),C=a(41),k=[{name:"John Doe",dist:"3 mi",code:"ASDFGHJKL"},{name:"John Doe",dist:"3 mi",code:"ASDFGHJKL"},{name:"John Doe",dist:"3 mi",code:"ASDFGHJKL"},{name:"John Doe",dist:"3 mi",code:"ASDFGHJKL"}],x={0:{users:{1:"John doe",2:"James"},private:!0,messages:[{sender:1,text:"Hello"},{sender:1,text:"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing."},{sender:2,text:"Ea officia eu adipisicing culpa pariatur mollit commodo tempor."},{sender:1,text:"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi."},{sender:1,text:"Hello"},{sender:1,text:"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing."},{sender:2,text:"Ea officia eu adipisicing culpa pariatur mollit commodo tempor."},{sender:1,text:"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi."}]},1:{users:{1:"John doe",2:"James"},private:!0,messages:[{sender:1,text:"Hello"},{sender:1,text:"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing."},{sender:2,text:"Ea officia eu adipisicing culpa pariatur mollit commodo tempor."},{sender:1,text:"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi."},{sender:1,text:"Hello"},{sender:1,text:"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing."},{sender:2,text:"Ea officia eu adipisicing culpa pariatur mollit commodo tempor."},{sender:1,text:"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi."}]}},w={names:["Missing Person 1","Missing Person 2"],contact:{Name:"asdf","Phone Number":"asdf",Email:"asdf"},code:"ABCDEFG",link:"https://search.party/s/ABCDEFG",authCode:"ASDFGHJKL",currentUser:1,director:0,mainChat:0,center:[38.986397499999995,-77.1117175],teams:[[1,2],[3,4]],people:{0:{id:0,name:"John Smith",email:"john@smith.com",tel:"1234567890",color:"#a7c",team:null},1:{id:1,name:"Mary Smith",email:"mary@smith.com",tel:"0987654321",color:"#3bf",team:0},2:{id:2,name:"James Smith",email:"james@smith.com",tel:"1230456789",color:"#d98",team:0},3:{id:3,name:"James Smith",email:"james@smith.com",tel:"1230456789",color:"#d98",team:1},4:{id:4,name:"James Smith",email:"james@smith.com",tel:"1230456789",color:"#d98",team:1}},chats:{0:[{message:"Hello, asdf asdf asf asdfasdfasdf",sender:0}]},trails:{}},P={"/api/searches":{get:function(e,t){return function(t){e(k)}},post:function(e,t){return function(t){e(w)}}},"/api/searches/:search/broadcast":{post:function(e,t){return function(t){e({success:!0})}}},"/api/searches/:search":{get:function(e,t){return function(a){Math.random()>.5?e(function(e){e.authCode;return Object(C.a)(e,["authCode"])}(w)):t({err:"No search exists"})}}},"/api/searches/:search/chats":{get:function(e,t){return function(t){e(x)}}}},_={},T=function(e){var t={emit:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];(_[e]||[]).forEach(function(e){return e.apply(void 0,a)})},on:function(e,t){_[e]=[].concat(Object(j.a)(_[e]||[]),[t])}};return t},L=T();L.on("location",function(e){var t=e.location,a=e.user;L.emit("user_updated",{user:a,location:t})});function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.method,n=void 0===a?"GET":a,r=t.body,c=void 0===r?{}:r;return new Promise(function(t,a){return setTimeout(function(){return(P[e]||P["/404"])[n.toLowerCase()](t,a)(c)},0)})}var R=function(e){return function(t){t({type:"SET_SEARCH",data:e})}},q=function(e){var t=e[0];return e.length>1&&(t+=" and "+(e.length-1)+" ",t+=e.length>2?"others":"other"),t},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"v",a=arguments.length>2?arguments[2]:void 0;void 0===a&&(a=t,t=Object(n.createRef)());return[function(){e.current.scrollTo({top:"v"===a?t.current.offsetTop:0,left:"h"===a?t.current.offsetLeft:0,behavior:"smooth"})},{ref:t}]},I=function(e){var t=null;return function(a){return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];t&&clearTimeout(t),t=setTimeout(function(){a.apply(void 0,r)},e)}}}(1e3);var D=Object(o.b)(function(e){var t=e.ui,a=(t=void 0===t?{}:t).modal;return{share_code:(a=void 0===a?{}:a).share_code}},{setCodeModal:S,setPage:b,setSearch:R})(function(e){var t=e.share_code,a=e.setCodeModal,c=e.setSearch,i=e.setPage,o=Object(n.useState)(""),s=Object(y.a)(o,2),l=s[0],u=s[1],m=Object(n.useState)("code"),d=Object(y.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(),E=Object(y.a)(h,2),v=E[0],b=E[1];Object(n.useEffect)(function(){""!==l&&I(function(e){f("loading"),M("/api/searches/:search").then(function(e){b(e),f("loaded")}).catch(function(e){return f("error")})})},[l]);var g={code:function(){return r.a.createElement("p",null,"Type in the search code")},error:function(){return r.a.createElement("p",null,"No search matches that code")},loading:function(){return r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Fetching...")},loaded:function(){return r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){c(v),i("search"),a(!1)}},"Search for ",q(v.names)))}};return r.a.createElement("div",{className:"modal modal-container"+(t?" visible":""),onClick:function(){return a(!1)}},r.a.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",null,"Input your code or link"),r.a.createElement("input",{type:"text",placeholder:"Code",value:l,onChange:function(e){f("code"),u(e.target.value)}}),g[p]()))}),F=a(3),J=a(35),U=a.n(J),B=function(e){var t=e.names,a=e.setNames,c=Object(n.useState)(""),i=Object(y.a)(c,2),o=i[0],s=i[1];return r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:function(e){a([o].concat(Object(j.a)(t))),s(""),e.preventDefault()}},r.a.createElement("input",{type:"text",className:"name-input",placeholder:"Add a name",onChange:function(e){return s(e.target.value)},value:o})),r.a.createElement("div",{className:"missing-name-list"},t.map(function(e,t){return r.a.createElement("div",{key:t,className:"missing-name"},e)})))};function Q(e){var t=e.setContact,a=e.back,c=e.next,i={name:{label:"Name",type:"text"},tel:{label:"Phone Number",type:"tel"},email:{label:"Email",type:"email"}},o=Object(n.useState)({name:"",tel:"",email:""}),s=Object(y.a)(o,2),l=s[0],u=s[1],m=function(e){return function(t){return u(Object(F.a)({},l,Object(f.a)({},e,t.target.value)))}};return r.a.createElement("div",null,r.a.createElement("h3",{className:"title"},"Contact"),r.a.createElement("div",{className:""},["name","tel","email"].map(function(e,t){return r.a.createElement("input",{key:t,type:i[e].type,placeholder:i[e].label,value:l[e],onChange:m(e)})})),r.a.createElement("div",{className:"row space-evenly"},r.a.createElement("button",{className:"button red",onClick:a},r.a.createElement("i",{className:"fa fa-arrow-left"})," Back"),r.a.createElement("button",{className:"button green",onClick:function(){t(l),c()}},"Next ",r.a.createElement("i",{className:"fa fa-arrow-right"}))))}function H(e){var t=e.names,a=e.setNames,n=e.back,c=e.next;return r.a.createElement("div",null,r.a.createElement("h3",{className:"title"},"Names"),r.a.createElement(B,{names:t,setNames:a}),r.a.createElement("div",{className:"row space-evenly"},r.a.createElement("button",{className:"button red",onClick:n},r.a.createElement("i",{className:"fa fa-times"})," Back"),r.a.createElement("button",{className:"button green",onClick:c},"Next ",r.a.createElement("i",{className:"fa fa-arrow-right"}))))}function G(e){var t=e.search,a=e.broadcast,c=(e.back,e.next),i=t.searchPromise,o=t.code,s=t.link,l=t.broadcasted;return r.a.createElement("div",null,i instanceof Promise?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Code"),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Code Loading"),r.a.createElement("h4",null,"Link"),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Link Loading"),r.a.createElement("h4",null,"QR"),r.a.createElement("div",{className:"qr-spacer"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," QR Loading"))):r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Code"),r.a.createElement("p",null,o),r.a.createElement("h4",null,"Link"),r.a.createElement("p",null,s),r.a.createElement("h4",null,"QR"),r.a.createElement(U.a,{value:o,size:200,className:"qr-canvas-output"})),r.a.createElement("br",null),r.a.createElement("button",{className:"button",disabled:i instanceof Promise,onClick:function(){return l?null:a()}},l instanceof Promise?r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Broadcasting"):l?r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"fa fa-check"})," Broadcasted"):r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"fa fa-broadcast-tower"})," Broadcast")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{disabled:i instanceof Promise,onClick:c,className:"button"},"Start"))}var z,W,X,K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).setNames=function(e){a.setState({missing_names:e})},a.setContact=function(e){a.setState({contact:e})},a.broadcast=function(){a.setState(function(e){var t=e.search;return{search:Object(F.a)({},t,{broadcasted:M("/api/searches/:search/broadcast",{body:{position:null},method:"post"}).then(function(e){var t=e.success;return a.setState(function(e){var a=e.search;return{search:Object(F.a)({},a,{broadcasted:t})}})})})}})},a.back=function(){return a.setTab(a.state.tab-1)},a.next=function(){return a.setTab(a.state.tab+1)},a.setTab=function(e){return a.setState({reverse:e<a.state.tab,ptab:a.state.tab}),-1===e?a.props.setCreateModal(!1):e===a.tabNames.length?(a.props.setCreateModal(!1),void a.setTab(0)):(e===a.tabNames.indexOf("Share Search")&&a.createSearch(),void a.setState({tab:e}))},a.state={tab:0,missing_names:[],contact:{},search:{broadcasted:!1,code:null,link:null,authCode:null,searchPromise:null},exitLeft:!1,reverse:!1,ptab:0},a.tabNames=["Enter Names","Add Information","Share Search"],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"createSearch",value:function(){var e=this;this.setState(function(t){var a=t.search;return{search:Object(F.a)({},a,{searchPromise:M("/api/searches",{method:"POST",body:e.getData()}).then(function(t){var a=t.code,n=t.link,r=t.authCode;e.setState(function(e){var t=e.search;return{search:Object(F.a)({},t,{code:a,link:n,authCode:r,searchPromise:null})}}),e.props.setSearch(t),e.props.setPage("search")})}),exitLeft:!0}})}},{key:"getData",value:function(){var e=this.state;return{contact:e.contact,names:e.missing_names}}},{key:"render",value:function(){var e=this,t=this.props,a=t.active,n=t.setCreateModal,c=this.state,i=c.tab,o=c.ptab,s=c.reverse,l=c.search,u=c.exitLeft,m=c.missing_names,d=this.setNames,p=this.setContact,f=this.next,h=this.back,E=this.broadcast,v={"Enter Names":function(){return r.a.createElement(H,{next:f,back:h,names:m,setNames:d})},"Add Information":function(){return r.a.createElement(Q,{back:h,next:f,setContact:p})},"Share Search":function(){return r.a.createElement(G,{next:f,search:l,broadcast:E})}};return r.a.createElement("div",{className:"modal modal-page  ".concat(u?" exitLeft":""," ").concat(a?"visible":"")},r.a.createElement("div",{className:"modal-top-bar"},r.a.createElement("i",{className:"close modal-icon fa",onClick:function(){e.setState({tab:0}),n(!1)}},"\xd7"),r.a.createElement("div",{className:"name"},"Create Search")),r.a.createElement("div",{className:"modal-content"},v[this.tabNames[i]]()),r.a.createElement("div",{className:"modal-bottom-bar tabs"},r.a.createElement("div",{className:"progress-container"},r.a.createElement("div",{className:"progressbar"},r.a.createElement("div",{className:"track"}),this.tabNames.map(function(t,a){return r.a.createElement("div",{key:a,className:"create-modal-tab"+" delay-".concat(s?o-a:a-o-1)+(i>a?" active":"")+(i===a?" current":""),onClick:function(){return e.setTab(a)}},t)})))))}}]),t}(n.Component),V=Object(o.b)(function(e){var t=e.ui,a=(t=void 0===t?{}:t).modal;return{create:(a=void 0===a?{}:a).create}},{setCreateModal:g,setSearch:R,setPage:b})(K),Z=a(36),Y=a.n(Z),$=a(37),ee=a.n($),te=function(e){return new Promise(function(t,a){var n=new Image;n.src=e,n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height;var r=e.getContext("2d");r.drawImage(n,0,0);var c=r.getImageData(0,0,n.width,n.height),i=Y()(c.data,n.width,n.height);null===i?a():t(i)}})},ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleError=function(e){a.setState({type:"capture-error"})},a.handleScan=function(e){a.handleResult(e)},a.handleImgUpload=function(e){a.reset();var t=e.target.files;if(t&&t[0]){var n=new FileReader;n.onloadend=function(e){var t=e.target.result;a.setState({uploaded_image:t}),te(t).then(function(e){a.handleResult(e.data)}).catch(function(){return a.setState({type:"upload-error"})})},n.readAsDataURL(t[0]),a.setState({type:"uploaded"})}},a.state={delay:500,type:"video",uploaded_image:"",searchError:!1,result:null,search:null,exitLeft:!1},a.tabNames=["Enter Names","Add Information","Share Search"],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"reset",value:function(){this.setState({uploaded_image:"",searchError:!1,result:null,search:null})}},{key:"handleResult",value:function(e){var t=this;this.setState({result:e}),M("/api/searches/:search").then(function(e){t.setState({search:e,searchError:""})}).catch(function(e){t.setState({search:null,searchError:e.err})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.active,c=t.setQRModal,i=t.setSearch,o=t.setPage,s=this.state,l=s.type,u=s.uploaded_image,m=s.result,d=s.search,p=s.searchError,f=s.exitLeft,h={width:"100%"},E={video:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{delay:e.state.delay,style:h,onError:e.handleError,onScan:e.handleScan}),r.a.createElement("div",{className:"box-container absolute"},r.a.createElement("div",{className:"box-child box-child-1"}),r.a.createElement("div",{className:"box-child box-child-2"}),r.a.createElement("div",{className:"box-child box-child-3"}),r.a.createElement("div",{className:"box-child box-child-4"})))},uploaded:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:u,style:h,alt:"QR code"}),d?r.a.createElement("p",null,r.a.createElement("button",{className:"button",onClick:function(){i(d),o("search"),e.setState({exitLeft:!0}),c(!1)}},"Search for ",q(d.names))):p?r.a.createElement("p",null,"No search with code: '",m,"'"):r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"}),m?" Fetching Search...":" Scanning..."))},"capture-error":function(){return r.a.createElement("p",null,"There was an error capturing video")},"upload-error":function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:u,style:h,alt:"QR code"}),r.a.createElement("br",null),r.a.createElement("p",null,"No QR code found"))}};return r.a.createElement("div",{className:"modal modal-page ".concat(f?" exitLeft":""," ").concat(a?"visible":"")},r.a.createElement("div",{className:"modal-top-bar"},r.a.createElement("i",{className:"close modal-icon fa",onClick:function(){c(!1),e.setState({type:"video"}),e.reset()}},"\xd7"),r.a.createElement("div",{className:"name"},"Scan QR")),r.a.createElement("div",{className:"modal-content no-padding relative"},r.a.createElement("div",{className:"center column relative"},a?E[l]():null),["video","capture-error"].includes(l)?r.a.createElement("label",{className:"button qr-action upload-qr-img",htmlFor:"qr-input"},r.a.createElement("input",{type:"file",name:"",id:"qr-input",onChange:this.handleImgUpload}),r.a.createElement("i",{className:"fa fa-upload"})," Upload"):r.a.createElement("button",{className:"button qr-action",onClick:function(){e.reset(),e.setState({type:"video"})}},"Switch to video")))}}]),t}(n.Component),ne=Object(o.b)(function(e){var t=e.ui,a=(t=void 0===t?{}:t).modal;return{create:(a=void 0===a?{}:a).create}},{setQRModal:N,setSearch:R,setPage:b})(ae),re=function(e){var t=e.proximal;return r.a.createElement("div",null,Array.isArray(t)?t.map(function(e,t){return r.a.createElement("div",{className:"proximal-card",key:t},r.a.createElement("div",{className:"name"},e.name),r.a.createElement("div",{className:"dist"},e.dist),r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fa fa-arrow-right"})))}):r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Loading"))},ce=Object(o.b)(function(){return{}},{setPersonModal:O,setPerson:function(e){return function(t){t({type:"SET_PERSON",data:e})}}})(function(e){var t,a,n=e.person,c=e.location,i=e.currentLocation,o=e.setPersonModal,s=e.setPerson,l=e.id;return r.a.createElement("div",{className:"person-display",onClick:function(){s(l),o(!0)}},r.a.createElement("div",{className:"person-name"},n.name),r.a.createElement("div",{className:"person-location"},c&&i?(t=c,a=i,Math.sqrt(Math.pow(t[0]-a[0],2)+Math.pow(t[1]-a[1],2))/69+" miles"):""),r.a.createElement("div",{className:"go-to"},r.a.createElement("i",{className:"fa fa-arrow-right"})))}),ie=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(m.a)(this,Object(d.a)(t).call(this,e)),console.log(e),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getProximalSearches()}},{key:"render",value:function(){var e=this,t=this.props.proximal;return r.a.createElement("div",{className:"page landing"},r.a.createElement("div",{className:"background-map"},r.a.createElement("div",{className:"map-actions"},r.a.createElement("h2",{className:"title center"},"Create Search"),r.a.createElement("button",{onClick:function(){return e.props.setCreateModal(!0)},className:"button"},"+ Create")),r.a.createElement("div",{className:"non-map-actions"},r.a.createElement("h2",{className:"title center"},"Join Search"),r.a.createElement("div",{className:"row space-around"},r.a.createElement("button",{className:"button",onClick:function(){return e.props.setQRModal(!0)}},"Scan QR"),r.a.createElement("button",{className:"button",onClick:function(){return e.props.setCodeModal(!0)}},"Input Code")),r.a.createElement("h3",{className:"title center"},"Proximal"),r.a.createElement(re,{proximal:t}))))}}]),t}(n.Component),oe=Object(o.b)(function(e){return{proximal:e.searches.proximal}},{getProximalSearches:function(){return function(e){e({type:"REQUEST_PROXIMAL",promise:M("/api/searches").then(function(t){return e({type:"UPDATE_PROXIMAL",data:t})})})}},setCreateModal:g,setQRModal:N,setCodeModal:S})(ie),se=a(14),le=a.n(se),ue=function(e){return e[e.length-1]};var me=Object(o.b)(function(e){var t=e.ui,a=(t=void 0===t?{}:t).modal,n=(a=void 0===a?{}:a).person_info,r=e.searches;return{person_info:n,currentSearch:r.currentSearch,currentPerson:r.currentPerson}},{setPersonModal:O})(function(e){var t=e.person_info,a=e.currentSearch,c=e.currentPerson,i=e.setPersonModal;Object(n.useEffect)(function(){z=le.a.map("person-map",{zoomControl:!1,attributionControl:!1,dragging:!1}),[le.a.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1Ijoiam9kcml0aXJrb2Rlc296Y29tIiwiYSI6ImNqeWcybGt4bTFpZ2EzbHFvZWlzbjF6cXIifQ.y13rgUritqRVVew3pyfC_g"})].forEach(function(e){return e.addTo(z)}),W=le.a.polyline([]).addTo(z),X=le.a.marker([]).addTo(z)},[]);var o,s=a&&a.trails;return Object(n.useEffect)(function(){if(null!==c&&null!==s){var e=s[c],t=e&&ue(e);W.setLatLngs(e||[]),t&&(X.setLatLng(t),z.setView(t,20))}},[c,s]),r.a.createElement("div",{className:"modal modal-page person-modal"+(t?" visible":"")},r.a.createElement("div",{className:"modal-head"},r.a.createElement("div",{className:"person-top-bar"},r.a.createElement("i",{className:"fa fa-arrow-left",onClick:function(){return i(!1)}})),r.a.createElement("div",{id:"person-map"})),r.a.createElement("div",{className:"modal-content"},null===c?null:(o=a.people[c],r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"name-bar"},r.a.createElement("div",{className:"contact-name"},o.name),r.a.createElement("div",{className:"contact-team"},"Team ",o.team)),r.a.createElement("dl",null,r.a.createElement("dt",null,"Email"),r.a.createElement("dd",null,"asdf@gmail.com"),r.a.createElement("dt",null,"Phone Number"),r.a.createElement("dd",null,"(123)-456-7890")),r.a.createElement("div",{className:"row space-evenly person-actions"},r.a.createElement("button",{className:"button"},"Cancel"),r.a.createElement("button",{className:"button"},"Message"))))),r.a.createElement("div",{className:"modal-bottom-bar",onClick:function(){i(!1)}},r.a.createElement("i",{className:"close modal-icon fa"},"\xd7")," Exit"))}),de=Object(n.forwardRef)(function(e,t){return r.a.createElement("div",{ref:t,className:"tab-page guide-page"},r.a.createElement("iframe",{key:"quide-frame",className:"guide-embed",src:"http://www.missingpersonsguide.com/guide/",frameBorder:"0",title:"guide"}),r.a.createElement("div",{className:"guide-loader"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Loading")))}),pe=a(23),fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).success=function(e){var t=e.coords;a.props.sendLocation(t,a.props.currentSearch.currentUser)},a.error=function(e){},a.state={map:null,mapLoaded:!1},a.watchId=null,a.timeoutId=null,a.polylines={},window.logThis=function(){return console.log(Object(pe.a)(a))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.watchId=navigator.geolocation.watchPosition(this.success,this.error,{enableHighAccuracy:!0,timeout:5e3,maximumAge:5e3}),this.map=le.a.map("mapid",{zoomControl:!1}),this.map.setView(this.props.currentSearch.center,20),[le.a.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1Ijoiam9kcml0aXJrb2Rlc296Y29tIiwiYSI6ImNqeWcybGt4bTFpZ2EzbHFvZWlzbjF6cXIifQ.y13rgUritqRVVew3pyfC_g"}),le.a.control.zoom({position:"bottomright"})].forEach(function(t){return t.addTo(e.map)})}},{key:"componentDidUpdate",value:function(){var e=this.props.currentSearch.trails;for(var t in e)this.polylines.hasOwnProperty(t)?this.polylines[t].addLatLng(e[t][e[t].length-1]):(this.polylines[t]=le.a.polyline(e[t],{color:"red"}),this.polylines[t].addTo(this.map))}},{key:"render",value:function(){return r.a.createElement("div",{id:"mapid",key:"map"})}}]),t}(n.Component),he=Object(o.b)(function(e){return{currentSearch:e.searches.currentSearch}},{sendLocation:function(e,t){return function(a){a({type:"SEND_WEBSOCKET_MESSAGE",evt:"location",payload:{location:e,user:t}})}}})(fe),Ee=Object(n.forwardRef)(function(e,t){return r.a.createElement("div",{ref:t,className:"tab-page media-page"})});function ve(e){var t=e.chat,a=e.openChat;return r.a.createElement("div",{className:"chat-display",onClick:function(){return a(t)}},r.a.createElement("div",{className:"person-name"},Object.values(t.users).join(", ")),r.a.createElement("div",{className:"go-to"},r.a.createElement("i",{className:"fa fa-arrow-right"})))}function be(e){var t=e.loading,a=e.chats,n=e.openChat;return r.a.createElement("div",{className:"chat-list"},r.a.createElement("h3",{className:"title"},"Chats"),t?r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-sync spinning"})," Loading"):Object.entries(a).map(function(e){var t=Object(y.a)(e,2),a=t[0],c=t[1];return r.a.createElement(ve,{key:"chat-"+a,chat:c,openChat:n})}))}function ge(e){var t=e.chat,a=e.closeChat,n=e.currentUser;return r.a.createElement("div",{className:"chat-view"},r.a.createElement("h3",{className:"top-row"},r.a.createElement("i",{className:"fa fa-arrow-left",onClick:a})," Chat"),t?t.messages.map(function(e,t){return r.a.createElement("div",{key:t,className:"line"+(e.sender===n?" self":"")},r.a.createElement("div",{className:"message"},e.text))}):null,r.a.createElement("div",{className:"bottom-input"},r.a.createElement("input",{type:"text",placeholder:"Message",className:"bottom-text-input"}),r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-paper-plane"}))))}var Ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).openChat=function(e){a.setState({page:"chat-view",currentChat:e})},a.closeChat=function(){a.setState({page:"chat-list"}),setTimeout(function(){return a.setState({currentChat:null})},200)},a.state={chats:{},chatOrder:[],currentChat:null,user:e.authCode,state:"initial",page:"chat-list"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({state:"loading"}),M("/api/searches/:search/chats").then(function(t){e.setState({chats:t,state:"loaded"})}).catch(function(e){})}},{key:"render",value:function(){var e=this.state,t=e.currentChat,a=e.state,n=e.chats,c=e.page,i=this.openChat,o=this.closeChat,s=this.props.currentSearch.currentUser;return r.a.createElement("div",{ref:this.props.tabRef,className:"tab-page chat-page"},r.a.createElement("div",{className:"chat-area"+("chat-view"===c?" alt":"")},r.a.createElement(be,{loading:"loading"===a,chats:n,openChat:i}),r.a.createElement(ge,{chat:t,closeChat:o,currentUser:s})))}}]),t}(n.Component),Se=Object(o.b)(function(e){return{currentSearch:e.searches.currentSearch}},{})(Ne),Oe=Object(n.forwardRef)(function(e,t){return r.a.createElement(Se,Object.assign({},e,{tabRef:t}))}),ye=Object(n.forwardRef)(function(e,t){var a=Object(n.useState)([]),c=Object(y.a)(a,2),i=c[0],o=c[1];return r.a.createElement("div",{ref:t,className:"tab-page search-page"},r.a.createElement("h3",{className:"title"},"Settings"),r.a.createElement("div",{className:"settings-card"},r.a.createElement("h4",{className:"title setting-title"},"Missing Names"),r.a.createElement(B,{names:i,setNames:o})),r.a.createElement("div",{className:"settings-card"},r.a.createElement("h4",{className:"title setting-title"},"Contact Info")),r.a.createElement("div",{className:"settings-card"},r.a.createElement("h4",{className:"title setting-title"},"Poster"),r.a.createElement("div",{className:"qr-spacer"},"asdf ",r.a.createElement("br",null)," asdf")),r.a.createElement("div",{className:"settings-card"},r.a.createElement("h4",{className:"title setting-title"},"Sharing"),r.a.createElement("div",{className:"qr-spacer"}," ","asdf ",r.a.createElement("br",null)," asdf")))}),je=function(e){return e[e.length-1]};var Ce,ke=Object(o.b)(function(e){return{currentSearch:e.searches.currentSearch}},{})(function(e){var t=e.currentSearch,a=e.myRef,c=t.currentUser,i=t.teams,o=t.people,s=t.trails,l=t.director,u=o[c].team,m=i[u],d=je(s[c]||[null]);return r.a.createElement("div",{ref:a,className:"tab-page team-page"},r.a.createElement("h3",null,"Director"),r.a.createElement("div",{className:"team-list"},r.a.createElement(ce,{person:o[l],location:je(s[l]||[null]),currentLocation:d,id:l})),r.a.createElement("h3",null,"My Team"),r.a.createElement("div",{className:"team-list"},m.map(function(e){return r.a.createElement(ce,{key:"person-"+e,person:o[e],location:je(s[e]||[null]),currentLocation:d,id:e})})),i.map(function(e,t){return t===u?null:r.a.createElement(n.Fragment,{key:"team-"+t},r.a.createElement("h3",null,"Team ",t+1),r.a.createElement("div",{className:"team-list"},e.map(function(e){return r.a.createElement(ce,{key:"person-"+e,person:o[e],location:je(s[e]||[null]),currentLocation:d,id:e})})))}))}),xe=Object(n.forwardRef)(function(e,t){return r.a.createElement(ke,Object.assign({},e,{myRef:t}))}),we=["team","chat","media","settings","guide"],Pe=["fa-users","fa-comment-alt","fa-photo-video","fa-cog","fa-question"],_e=[xe,Oe,Ee,ye,de],Te=we.map(function(){return Object(n.createRef)()}),Le=Object(n.createRef)(),Me=Te.map(function(e){return A(Le,e,"h")[0]}),Re=Object(n.createRef)(),qe=A(Re,"v"),Ae=Object(y.a)(qe,2),Ie=Ae[0],De=Ae[1],Fe=Object(o.b)(function(e){return{currentSearch:e.searches.currentSearch}},{setSidebar:v})(function(e){var t=e.setSidebar,a=e.currentSearch,c=Object(n.useState)(0),i=Object(y.a)(c,2),o=i[0],s=i[1],l=Object(n.useState)(!1),u=Object(y.a)(l,2),m=u[0],d=u[1],p=_e.map(function(e,t){return r.a.createElement(e,{key:"tab-"+t,ref:Te[t]})}),f=we.map(function(e,t){return r.a.createElement("div",{key:t,className:"tab"+(t===o?" active":""),onClick:function(){Me[t]()}},r.a.createElement("i",{className:"fa "+Pe[t]}),e)});Object(n.useEffect)(function(){Le.current&&Te[0].current&&Le.current.addEventListener("scroll",function(){return s(Te.map(function(e,t){var a=e.current;return[null!==a&&null!==Le.current?Math.abs(a.offsetLeft-Le.current.scrollLeft):1/0,t]}).sort(function(e,t){return Object(y.a)(e,1)[0]-Object(y.a)(t,1)[0]})[0][1])},{passive:!0})},[]);var h={onTouchStart:function(){clearTimeout(Ce),Ce=void 0,d(!0)},onTouchEnd:function(){Ce=setTimeout(function(){d(!1)},750)}};return r.a.createElement("div",{className:"page-search"},r.a.createElement("div",{className:"page-name"},r.a.createElement("i",{className:"fa fa-bars modal-icon",onClick:function(){return t(!0)}})," ","Search"),r.a.createElement("div",{className:"map-bg"},r.a.createElement(he,null)),r.a.createElement("div",{ref:Re,className:"map-content"+(m?"":" no-pointer-events")},r.a.createElement("div",Object.assign({className:"map-spacer"},h)),r.a.createElement("div",Object.assign({className:"content-tabs"},h,De),r.a.createElement("div",{className:"search-header",onClick:Ie},"Search for ",q(a.names)),r.a.createElement("div",{className:"tab-content",ref:Le},r.a.createElement("div",{className:"all-tabs"},p)),r.a.createElement("div",{className:"tabs row space-evenly"},f))),r.a.createElement("div",{className:"map-actions"},r.a.createElement("button",{className:""},r.a.createElement("i",{className:"fa fa-plus"})),r.a.createElement("button",{className:""},r.a.createElement("i",{className:"fa fa-bookmark"}))))});function Je(e){e.children;var t=e.active,a=e.setSidebar;return r.a.createElement("div",{className:"sidebar"+(t?" active":"")},r.a.createElement("div",{className:"sidebar-top-bar"},r.a.createElement("i",{className:"fa sidebar-icon",onClick:function(){return a(!1)}},"\xd7")," ","Menu"),r.a.createElement("div",{className:"sidebar-content"}))}var Ue=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("loader");e.parentNode.removeChild(e)}},{key:"render",value:function(){var e=this.props,t=e.setSidebar,a=e.sidebar,c=e.page,i=e.create,o=e.scan_qr,s=e.share_code,l=e.person_info,u={landing:r.a.createElement(oe,null),search:r.a.createElement(Fe,null)}[c];return r.a.createElement(n.Fragment,null,r.a.createElement(Je,{active:a,setSidebar:t}),r.a.createElement(V,{active:i}),r.a.createElement(ne,{active:o}),r.a.createElement(D,{active:s}),r.a.createElement(me,{active:l}),u)}}]),t}(n.Component),Be=Object(o.b)(function(e){var t=e.ui,a=t.sidebar,n=t.name,r=t.page,c=t.modal;return{sidebar:a,name:n,page:r,create:c.create,scan_qr:c.scan_qr,share_code:c.share_code,person_info:c.person_info}},{setSidebar:v})(Ue);a(72),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=a(17),He=a(38),Ge=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0;return(e[n.type]||e._||function(e){return a})(n,a)}},ze=Ge({SET_SIDEBAR:function(e,t){return Object(F.a)({},t,{sidebar:e.value})},SET_NAME:function(e,t){return Object(F.a)({},t,{name:e.value})},SET_MODAL:function(e,t){return Object(F.a)({},t,{modal:Object(F.a)({},t.modal,Object(f.a)({},e.modal,e.value))})},SET_PAGE:function(e,t){var a=e.page;return Object(F.a)({},t,{page:a})}},{sidebar:!1,name:"",page:"landing",modal:{create:!1,scan_qr:!1,share_code:!1,person_info:!1}});console.log(ze);var We=ze,Xe={},Ke=Ge({REQUEST_PROXIMAL:function(e,t){return Object(F.a)({},t,{proximal:e.promise})},UPDATE_PROXIMAL:function(e,t){return Object(F.a)({},t,{proximal:e.data})},SET_SEARCH:function(e,t){return Object(F.a)({},t,{currentSearch:Object(F.a)({},Xe,e.data)})},SET_PERSON:function(e,t){return Object(F.a)({},t,{currentPerson:e.data})},UPDATE_USER_POSITION:function(e,t){var a=t.currentSearch,n=e.payload,r=n.user,c=n.location,i=c.longitude,o=c.latitude;return Object(F.a)({},t,{currentSearch:Object(F.a)({},a,{trails:Object(F.a)({},a.trails,Object(f.a)({},e.payload.user,[].concat(Object(j.a)(a.trails[r]||[]),[[o,i]])))})})}},{proximal:[],currentPerson:null,currentSearch:null});console.log(Ke);var Ve=Ke,Ze=Object(Qe.c)({ui:We,searches:Ve}),Ye=Object(Qe.d)(Ze,Object(Qe.a)(He.a,function(e){var t=T();return t.on("user_updated",function(t){e.dispatch({type:"UPDATE_USER_POSITION",payload:t})}),function(e){return function(a){if("SEND_WEBSOCKET_MESSAGE"!==a.type)return e(a);t.emit(a.evt,a.payload)}}}));i.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:Ye},r.a.createElement(Be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.b8bbbf97.chunk.js.map