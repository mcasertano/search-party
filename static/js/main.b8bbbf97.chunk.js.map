{"version":3,"sources":["actions/ui.js","fakeServer.js","actions/searches.js","util.js","pages/CodeModal.js","components/NameList.js","pages/Create.js","pages/PersonModal.js","pages/InputQR.js","components/ProximalList.js","components/PersonDisplay.js","pages/Landing.js","pages/GuidePage.js","pages/MapPage.js","pages/MediaPage.js","pages/MessagesPage.js","pages/SettingsPage.js","pages/TeamPage.js","pages/SearchPage.js","pages/Sidebar.js","App.js","serviceWorker.js","reducers/reducerFromObject.js","reducers/ui.js","reducers/searches.js","reducers/root.js","store.js","index.js"],"names":["modalAction","modal","value","type","setAction","name","key","arguments","length","undefined","Object","defineProperty","setSidebar","setPage","setCreateModal","setQRModal","setCodeModal","setPersonModal","data","dist","code","chats","0","users","1","2","private","messages","sender","text","search","names","contact","Name","Phone Number","Email","link","authCode","currentUser","director","mainChat","center","teams","people","id","email","tel","color","team","3","4","message","trails","server","/api/searches","get","send","err","body","post","/api/searches/:search/broadcast","success","/api/searches/:search","Math","random","_ref","objectWithoutProperties","getSearchForClient","/api/searches/:search/chats","paths","m","url","r","path","_len","Array","_key","forEach","cb","apply","concat","toConsumableArray","s","on","_ref2","location","user","emit","fetch","_ref3","_ref3$method","method","_ref3$body","Promise","resolve","reject","setTimeout","toLowerCase","setSearch","dispatch","createLabel","str","useScroll","container","ref","direction","createRef","current","scrollTo","top","offsetTop","left","offsetLeft","behavior","debounce","delay","timeOut","fn","args","clearTimeout","createDebouncer","connect","_ref2$ui","ui","_ref2$ui$modal","share_code","_useState","useState","_useState2","slicedToArray","setCode","_useState3","_useState4","state","setState","_useState5","_useState6","setLocalSearch","useEffect","then","catch","states","react_default","a","createElement","error","loading","className","loaded","onClick","e","stopPropagation","placeholder","onChange","evt","target","NameList","setNames","currentName","setCurrentName","react","onSubmit","preventDefault","map","i","EnterInfo","setContact","back","next","fields","label","contactInfo","setContactInfo","createSetter","n","objectSpread","AddNames","ShareSearch","broadcast","searchPromise","broadcasted","lib_default","size","disabled","polyline","marker","Create","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","missing_names","_ref4","position","_ref5","_ref6","setTab","tab","reverse","ptab","tabNames","indexOf","createSearch","exitLeft","_this2","_ref7","getData","_ref8","_this$state","_this3","_this$props","active","_this$state2","tabs","Enter Names","Add Information","Share Search","_ShareSearch","t","Component","_ref9","_ref9$ui","_ref9$ui$modal","create","getQRCode","dataUrl","img","Image","src","onload","c","document","width","height","ctx","getContext","drawImage","imageData","getImageData","res","jsQR","QRModal","handleError","handleScan","result","handleResult","handleImgUpload","reset","files","fileReader","FileReader","onloadend","uploaded_image","readAsDataURL","searchError","previewStyle","video","react_qr_scanner_lib_default","style","onError","onScan","uploaded","alt","capture-error","upload-error","includes","htmlFor","_ref$ui","_ref$ui$modal","ProximalList","proximal","isArray","p","setPerson","b","person","currentLocation","sqrt","pow","Landing","console","log","getProximalSearches","searches","promise","last","person_info","_ref2$searches","currentSearch","currentPerson","L","zoomControl","attributionControl","dragging","tileLayer","maxZoom","accessToken","x","addTo","searchTrails","trail","lastPoint","setLatLngs","setLatLng","setView","forwardRef","frameBorder","title","Map","coords","sendLocation","mapLoaded","watchId","timeoutId","polylines","window","logThis","assertThisInitialized","navigator","geolocation","watchPosition","enableHighAccuracy","timeout","maximumAge","attribution","control","zoom","hasOwnProperty","addLatLng","MapPage","payload","ChatName","chat","openChat","values","join","ChatList","entries","ChatView","closeChat","MessagesPage","currentChat","page","chatOrder","tabRef","Connected","assign","pointerTimeout","myRef","currentTeamId","currentTeam","components_PersonDisplay","TeamPage_Connected","tabIcons","tabComponents","TeamPage","TimelinePage","SettingsPage","GuidePage","refs","tabParentRef","scrollers","mapParentRef","execScroll","scrollProps","pointerEvents","setPointerEvents","TabComponent","tabButtons","addEventListener","abs","scrollLeft","Infinity","sort","passive","touchProps","onTouchStart","onTouchEnd","Sidebar","children","App","loader","getElementById","parentNode","removeChild","sidebar","scan_qr","currentPage","landing","pages_Landing","pages_SearchPage","pages_Create","InputQR","pages_CodeModal","pages_PersonModal","Boolean","hostname","match","reducerFromObject","obj","initialState","action","_","SET_SIDEBAR","SET_NAME","SET_MODAL","SET_PAGE","initialSearchState","REQUEST_PROXIMAL","UPDATE_PROXIMAL","SET_SEARCH","SET_PERSON","UPDATE_USER_POSITION","_action$payload","_action$payload$locat","longitude","latitude","combineReducers","createStore","rootReducer","applyMiddleware","thunk","storeAPI","socket","ReactDOM","render","react_router_dom","es","store","src_App_0","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b8bbbf97.chunk.js","sourcesContent":["let modalAction = modal => value => ({\n\ttype: \"SET_MODAL\",\n\tmodal,\n\tvalue\n});\n\nlet setAction = (name, key=\"value\") => value => ({\n\ttype: \"SET_\"+name,\n\t[key]: value\n});\n\nexport const setSidebar = setAction(\"SIDEBAR\");\nexport const setName = setAction(\"NAME\");\nexport const setPage = setAction(\"PAGE\", \"page\");\n\n\nexport const setCreateModal = modalAction(\"create\");\nexport const setQRModal = modalAction(\"scan_qr\");\nexport const setCodeModal = modalAction(\"share_code\");\nexport const setPersonModal = modalAction(\"person_info\");\n\n","let data = {\n\tproximalSearches: [\n\t\t{\n\t\t\tname: \"John Doe\",\n\t\t\tdist: \"3 mi\",\n\t\t\tcode: \"ASDFGHJKL\"\n\t\t},\n\t\t{\n\t\t\tname: \"John Doe\",\n\t\t\tdist: \"3 mi\",\n\t\t\tcode: \"ASDFGHJKL\"\n\t\t},\n\t\t{\n\t\t\tname: \"John Doe\",\n\t\t\tdist: \"3 mi\",\n\t\t\tcode: \"ASDFGHJKL\"\n\t\t},\n\t\t{\n\t\t\tname: \"John Doe\",\n\t\t\tdist: \"3 mi\",\n\t\t\tcode: \"ASDFGHJKL\"\n\t\t}\n\t]\n};\n\nlet chats = {\n\t0: {\n\t\tusers: { 1: \"John doe\", 2: \"James\" },\n\t\tprivate: true,\n\t\tmessages: [\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext: \"Hello\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 2,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea officia eu adipisicing culpa pariatur mollit commodo tempor.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext: \"Hello\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 2,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea officia eu adipisicing culpa pariatur mollit commodo tempor.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi.\"\n\t\t\t}\n\t\t]\n\t},\n\t1: {\n\t\tusers: { 1: \"John doe\", 2: \"James\" },\n\t\tprivate: true,\n\t\tmessages: [\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext: \"Hello\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 2,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea officia eu adipisicing culpa pariatur mollit commodo tempor.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext: \"Hello\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Nulla anim aliquip ut magna enim voluptate. Pariatur ullamco deserunt proident ipsum. Non anim dolor fugiat ullamco cillum ut nisi do ex aliquip excepteur do aliquip adipisicing.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 2,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea officia eu adipisicing culpa pariatur mollit commodo tempor.\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tsender: 1,\n\t\t\t\ttext:\n\t\t\t\t\t\"Ea ipsum sit officia eu duis elit incididunt commodo eu nulla Lorem eu voluptate ea. Cupidatat magna ad qui nisi consectetur dolore proident ullamco cupidatat occaecat. Dolor velit tempor cillum dolor voluptate reprehenderit laboris deserunt proident aliquip duis consectetur esse. Minim fugiat est irure eu est voluptate esse adipisicing pariatur sint excepteur voluptate magna nisi.\"\n\t\t\t}\n\t\t]\n\t}\n};\n\nlet search = {\n\tnames: [\"Missing Person 1\", \"Missing Person 2\"],\n\tcontact: {\n\t\tName: \"asdf\",\n\t\t\"Phone Number\": \"asdf\",\n\t\tEmail: \"asdf\"\n\t},\n\tcode: \"ABCDEFG\",\n\tlink: \"https://search.party/s/ABCDEFG\",\n\tauthCode: \"ASDFGHJKL\",\n\tcurrentUser: 1,\n\tdirector: 0,\n\tmainChat: 0,\n\tcenter: [38.986397499999995, -77.1117175],\n\tteams: [[1, 2], [3, 4]],\n\tpeople: {\n\t\t0: {\n\t\t\tid: 0,\n\t\t\tname: \"John Smith\",\n\t\t\temail: \"john@smith.com\",\n\t\t\ttel: \"1234567890\",\n\t\t\tcolor: \"#a7c\",\n\t\t\tteam: null\n\t\t},\n\t\t1: {\n\t\t\tid: 1,\n\t\t\tname: \"Mary Smith\",\n\t\t\temail: \"mary@smith.com\",\n\t\t\ttel: \"0987654321\",\n\t\t\tcolor: \"#3bf\",\n\t\t\tteam: 0\n\t\t},\n\t\t2: {\n\t\t\tid: 2,\n\t\t\tname: \"James Smith\",\n\t\t\temail: \"james@smith.com\",\n\t\t\ttel: \"1230456789\",\n\t\t\tcolor: \"#d98\",\n\t\t\tteam: 0\n\t\t},\n\t\t3: {\n\t\t\tid: 3,\n\t\t\tname: \"James Smith\",\n\t\t\temail: \"james@smith.com\",\n\t\t\ttel: \"1230456789\",\n\t\t\tcolor: \"#d98\",\n\t\t\tteam: 1\n\t\t},\n\t\t4: {\n\t\t\tid: 4,\n\t\t\tname: \"James Smith\",\n\t\t\temail: \"james@smith.com\",\n\t\t\ttel: \"1230456789\",\n\t\t\tcolor: \"#d98\",\n\t\t\tteam: 1\n\t\t}\n\t},\n\tchats: {\n\t\t0: [\n\t\t\t{\n\t\t\t\tmessage: \"Hello, asdf asdf asf asdfasdfasdf\",\n\t\t\t\tsender: 0\n\t\t\t}\n\t\t]\n\t},\n\ttrails: {}\n};\n\nlet getSearchForClient = ({ authCode, ...search }) => search;\n\nlet server = {\n\t\"/api/searches\": {\n\t\tget: (send, err) => body => {\n\t\t\tsend(data.proximalSearches);\n\t\t},\n\t\tpost: (send, err) => body => {\n\t\t\tsend(search);\n\t\t}\n\t},\n\t\"/api/searches/:search/broadcast\": {\n\t\tpost: (send, err) => body => {\n\t\t\tsend({\n\t\t\t\tsuccess: true\n\t\t\t});\n\t\t}\n\t},\n\t\"/api/searches/:search\": {\n\t\tget: (send, err) => body => {\n\t\t\tif (Math.random() > 0.5) {\n\t\t\t\tsend(getSearchForClient(search));\n\t\t\t} else {\n\t\t\t\terr({\n\t\t\t\t\terr: \"No search exists\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\t\"/api/searches/:search/chats\": {\n\t\tget: (send, err) => body => {\n\t\t\tsend(chats);\n\t\t}\n\t}\n};\n\nlet paths = {};\n\nlet m = url => {\n\tlet r = {};\n\tr.emit = (path, ...data) => {\n\t\t(paths[path] || []).forEach(cb => cb(...data));\n\t};\n\tr.on = (path, cb) => {\n\t\tpaths[path] = [...(paths[path] || []), cb];\n\t};\n\treturn r;\n};\n\nlet s = m(\"\");\n\ns.on(\"location\", ({ location, user }) => {\n\ts.emit(\"user_updated\", { user, location });\n});\n\nexport const socketMiddleware = url => {\n\treturn storeAPI => {\n\t\tlet socket = m(url);\n\n\t\tsocket.on(\"user_updated\", payload => {\n\t\t\tstoreAPI.dispatch({\n\t\t\t\ttype: \"UPDATE_USER_POSITION\",\n\t\t\t\tpayload\n\t\t\t});\n\t\t});\n\n\t\treturn next => action => {\n\t\t\tif (action.type === \"SEND_WEBSOCKET_MESSAGE\") {\n\t\t\t\tsocket.emit(action.evt, action.payload);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn next(action);\n\t\t};\n\t};\n};\n\nexport default function fetch(path = \"/\", { method = \"GET\", body = {} } = {}) {\n\treturn new Promise((resolve, reject) =>\n\t\tsetTimeout(\n\t\t\t() =>\n\t\t\t\t(server[path] || server[\"/404\"])[method.toLowerCase()](\n\t\t\t\t\tresolve,\n\t\t\t\t\treject\n\t\t\t\t)(body),\n\t\t\t0\n\t\t)\n\t);\n}\n","import fetch from \"../fakeServer.js\";\n// import socket from \"../fakeServer.js\";\n\nexport const getProximalSearches = () => dispatch => {\n\tdispatch({\n\t\ttype: \"REQUEST_PROXIMAL\",\n\t\tpromise: fetch(\"/api/searches\").then(data =>\n\t\t\tdispatch({ type: \"UPDATE_PROXIMAL\", data })\n\t\t)\n\t});\n};\n\nexport const setSearch = data => dispatch => {\n\tdispatch({\n\t\ttype: \"SET_SEARCH\",\n\t\tdata\n\t});\n}\n\nexport const sendLocation = (location, user) => dispatch => {\n\tdispatch({\n\t\ttype: \"SEND_WEBSOCKET_MESSAGE\",\n\t\tevt: \"location\",\n\t\tpayload: {\n\t\t\tlocation,\n\t\t\tuser,\n\t\t}\n\t});\n}\n\nexport const setPerson = data => dispatch => {\n\tdispatch({\n\t\ttype: \"SET_PERSON\",\n\t\tdata\n\t});\n}","import { createRef } from \"react\";\n\nexport let createLabel = names => {\n\tlet str = names[0];\n\tif (names.length > 1) {\n\t\tstr += \" and \" + (names.length - 1) + \" \";\n\t\tstr += names.length > 2 ? \"others\" : \"other\";\n\t}\n\treturn str;\n};\n\nexport const createAnimation = (update, timing, duration) => (\n\tcb = () => {}\n) => {\n\tconst start = +new Date();\n\tlet cancel = false;\n\tconst animate = () => {\n\t\tconst current = +new Date(),\n\t\t\tdt = current - start;\n\t\tcancel = cancel || dt > duration;\n\t\tif (!cancel) requestAnimationFrame(animate);\n\t\tupdate(timing(dt / duration));\n\t\t// cancel = !update(timing(dt / duration));\n\t};\n\tanimate();\n};\n\nexport const useScroll = (container, ref=\"v\", direction) => {\n\tif (direction === undefined) {\n\t\tdirection = ref;\n\t\tref = createRef();\n\t}\n\tlet htmlAttributes = { ref };\n\n\tconst executeScroll = () => {\n\t\tcontainer.current.scrollTo({\n\t\t\ttop:\n\t\t\t\tdirection === \"v\"\n\t\t\t\t\t? ref.current.offsetTop\n\t\t\t\t\t: 0,\n\t\t\tleft:\n\t\t\t\tdirection === \"h\"\n\t\t\t\t\t? ref.current.offsetLeft\n\t\t\t\t\t: 0,\n\t\t\tbehavior: \"smooth\"\n\t\t});\n\t};\n\n\treturn [executeScroll, htmlAttributes];\n};\n\nexport const createDebouncer = delay => {\n\tlet timeOut = null;\n\treturn fn => (...args) => {\n\t\tif (timeOut) clearTimeout(timeOut);\n\t\ttimeOut = setTimeout(() => {\n\t\t\tfn(...args);\n\t\t}, delay);\n\t};\n};\n","import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setSearch } from \"../actions/searches.js\";\nimport { setCodeModal, setPage } from \"../actions/ui.js\";\nimport fetch from \"../fakeServer.js\";\nimport { createDebouncer, createLabel } from \"../util.js\";\n\nconst debounce = createDebouncer(1000);\n\nfunction CodeModal({ share_code, setCodeModal, setSearch, setPage }) {\n\tconst [code, setCode] = useState(\"\");\n\tconst [state, setState] = useState(\"code\");\n\tconst [search, setLocalSearch] = useState();\n\n\tuseEffect(() => {\n\t\tif (code !== \"\")\n\t\t\tdebounce(code => {\n\t\t\t\tsetState(\"loading\");\n\t\t\t\tfetch(\"/api/searches/:search\") // TODO: Replace with real\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\tsetLocalSearch(data);\n\t\t\t\t\t\tsetState(\"loaded\");\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => setState(\"error\"));\n\t\t\t});\n\t}, [code]);\n\n\tconst states = {\n\t\tcode: () => <p>Type in the search code</p>,\n\t\terror: () => <p>No search matches that code</p>,\n\t\tloading: () => (\n\t\t\t<p>\n\t\t\t\t<i className=\"fa fa-sync spinning\" /> Fetching...\n\t\t\t</p>\n\t\t),\n\t\tloaded: () => (\n\t\t\t<p>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetSearch(search);\n\t\t\t\t\t\tsetPage(\"search\");\n\t\t\t\t\t\tsetCodeModal(false);\n\t\t\t\t\t}}>\n\t\t\t\t\tSearch for {createLabel(search.names)}\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t)\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\"modal modal-container\" + (share_code ? \" visible\" : \"\")}\n\t\t\tonClick={() => setCodeModal(false)}>\n\t\t\t<div className=\"modal-content\" onClick={e => e.stopPropagation()}>\n\t\t\t\t<p>Input your code or link</p>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Code\"\n\t\t\t\t\tvalue={code}\n\t\t\t\t\tonChange={evt => {\n\t\t\t\t\t\tsetState(\"code\");\n\t\t\t\t\t\tsetCode(evt.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{states[state]()}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default connect(\n\t({ ui: { modal: { share_code } = {} } = {} }) => ({ share_code }),\n\t{ setCodeModal, setPage, setSearch }\n)(CodeModal);\n","import React, { Fragment, useState } from \"react\";\n\nexport default function({names, setNames}) {\n\tlet [currentName, setCurrentName] = useState(\"\");\n\treturn (\n\t\t<Fragment>\n\t\t\t<form\n\t\t\t\tonSubmit={e => {\n\t\t\t\t\tsetNames([currentName, ...names]);\n\t\t\t\t\tsetCurrentName(\"\");\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"name-input\"\n\t\t\t\t\tplaceholder=\"Add a name\"\n\t\t\t\t\tonChange={evt => setCurrentName(evt.target.value)}\n\t\t\t\t\tvalue={currentName}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t\t<div className=\"missing-name-list\">\n\t\t\t\t{names.map((name, i) => (\n\t\t\t\t\t<div key={i} className=\"missing-name\">\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n","import QRCode from \"qrcode.react\";\nimport React, { Component, Fragment, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setSearch } from \"../actions/searches.js\";\nimport { setCreateModal, setPage } from \"../actions/ui.js\";\nimport fetch from \"../fakeServer.js\";\n\nimport NameList from \"../components/NameList.js\";\n\nfunction EnterInfo({ setContact, back, next }) {\n\tconst fields = {\n\t\tname: {\n\t\t\tlabel: \"Name\",\n\t\t\ttype: \"text\"\n\t\t},\n\t\ttel: {\n\t\t\tlabel: \"Phone Number\",\n\t\t\ttype: \"tel\"\n\t\t},\n\t\temail: {\n\t\t\tlabel: \"Email\",\n\t\t\ttype: \"email\"\n\t\t}\n\t};\n\tconst inputOrder = [\"name\", \"tel\", \"email\"];\n\tconst [contactInfo, setContactInfo] = useState({\n\t\tname: \"\",\n\t\ttel: \"\",\n\t\temail: \"\"\n\t});\n\n\tconst createSetter = n => evt =>\n\t\tsetContactInfo({\n\t\t\t...contactInfo,\n\t\t\t[n]: evt.target.value\n\t\t});\n\n\treturn (\n\t\t<div>\n\t\t\t<h3 className=\"title\">Contact</h3>\n\t\t\t<div className=\"\">\n\t\t\t\t{inputOrder.map((n, i) => (\n\t\t\t\t\t<input\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\ttype={fields[n].type}\n\t\t\t\t\t\tplaceholder={fields[n].label}\n\t\t\t\t\t\tvalue={contactInfo[n]}\n\t\t\t\t\t\tonChange={createSetter(n)}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<div className=\"row space-evenly\">\n\t\t\t\t<button className=\"button red\" onClick={back}>\n\t\t\t\t\t<i className=\"fa fa-arrow-left\" /> Back\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"button green\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetContact(contactInfo);\n\t\t\t\t\t\tnext();\n\t\t\t\t\t}}>\n\t\t\t\t\tNext <i className=\"fa fa-arrow-right\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction AddNames({ names, setNames, back, next }) {\n\t// let [names, setNameList] = useState([]);\n\treturn (\n\t\t<div>\n\t\t\t<h3 className=\"title\">Names</h3>\n\t\t\t<NameList names={names} setNames={setNames} />\n\t\t\t<div className=\"row space-evenly\">\n\t\t\t\t<button className=\"button red\" onClick={back}>\n\t\t\t\t\t<i className=\"fa fa-times\" /> Back\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"button green\"\n\t\t\t\t\tonClick={next}>\n\t\t\t\t\tNext <i className=\"fa fa-arrow-right\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction ShareSearch({ search, broadcast, back, next }) {\n\tlet { searchPromise, code, link, broadcasted } = search;\n\treturn (\n\t\t<div>\n\t\t\t{searchPromise instanceof Promise ? (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h4>Code</h4>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<i className=\"fa fa-sync spinning\" /> Code Loading\n\t\t\t\t\t</p>\n\t\t\t\t\t<h4>Link</h4>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<i className=\"fa fa-sync spinning\" /> Link Loading\n\t\t\t\t\t</p>\n\t\t\t\t\t<h4>QR</h4>\n\t\t\t\t\t{/* <p> */}\n\t\t\t\t\t<div className=\"qr-spacer\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<i className=\"fa fa-sync spinning\" /> QR Loading\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* </p> */}\n\t\t\t\t</Fragment>\n\t\t\t) : (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h4>Code</h4>\n\t\t\t\t\t<p>{code}</p>\n\t\t\t\t\t<h4>Link</h4>\n\t\t\t\t\t<p>{link}</p>\n\t\t\t\t\t<h4>QR</h4>\n\t\t\t\t\t<QRCode\n\t\t\t\t\t\tvalue={code}\n\t\t\t\t\t\tsize={200}\n\t\t\t\t\t\tclassName=\"qr-canvas-output\"\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t\t<br />\n\t\t\t<button\n\t\t\t\tclassName=\"button\"\n\t\t\t\tdisabled={searchPromise instanceof Promise}\n\t\t\t\tonClick={() => (!broadcasted ? broadcast() : null)}>\n\t\t\t\t{!(broadcasted instanceof Promise) ? (\n\t\t\t\t\tbroadcasted ? (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<i className=\"fa fa-check\" /> Broadcasted\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<i className=\"fa fa-broadcast-tower\" /> Broadcast\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)\n\t\t\t\t) : (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<i className=\"fa fa-sync spinning\" /> Broadcasting\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t</button>\n\t\t\t<br />\n\t\t\t<br />\n\t\t\t<button\n\t\t\t\tdisabled={searchPromise instanceof Promise}\n\t\t\t\tonClick={next}\n\t\t\t\tclassName=\"button\">\n\t\t\t\tStart\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\n// class Swipable extends Component {\n// \tstatic Tab = ({ children, onFirstNav=()=>{} }) => {\n// \t\tthis.firstMounts[this.tabNum++] = onFirstNav;\n// \t\treturn children[0];\n// \t};\n\n// \tsetTab = tab => {\n// \t\tlet ptab = this.state.tab;\n// \t\tthis.setState({ tab });\n// \t\tthis.onChange(tab, ptab);\n// \t\tif(this.hasVisited[tab]) this.firstMounts[tab]();\n// \t};\n\n// \tconstructor(props) {\n// \t\tsuper(props);\n// \t\tthis.state = {\n// \t\t\ttab: 0\n// \t\t};\n// \t\tthis.tabNum = 0;\n// \t\tthis.firstMounts = {};\n// \t\tthis.hasVisited = {};\n// \t\tthis.onChange = props.onChange;\n// \t}\n// }\n\nclass Create extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttab: 0,\n\t\t\tmissing_names: [],\n\t\t\tcontact: {},\n\t\t\tsearch: {\n\t\t\t\tbroadcasted: false,\n\t\t\t\tcode: null,\n\t\t\t\tlink: null,\n\t\t\t\tauthCode: null,\n\t\t\t\tsearchPromise: null\n\t\t\t},\n\t\t\texitLeft: false,\n\t\t\treverse: false,\n\t\t\tptab: 0\n\t\t};\n\t\tthis.tabNames = [\"Enter Names\", \"Add Information\", \"Share Search\"];\n\t}\n\n\tsetNames = missing_names => {\n\t\tthis.setState({\n\t\t\tmissing_names\n\t\t});\n\t};\n\tsetContact = contact => {\n\t\tthis.setState({\n\t\t\tcontact\n\t\t});\n\t};\n\n\tcreateSearch() {\n\t\tthis.setState(({ search }) => ({\n\t\t\tsearch: {\n\t\t\t\t...search,\n\t\t\t\tsearchPromise: fetch(\"/api/searches\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tbody: this.getData()\n\t\t\t\t}).then(data => {\n\t\t\t\t\tlet { code, link, authCode } = data;\n\t\t\t\t\tthis.setState(({ search }) => ({\n\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\t...search,\n\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\tauthCode,\n\t\t\t\t\t\t\tsearchPromise: null\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t\tthis.props.setSearch(data);\n\t\t\t\t\tthis.props.setPage(\"search\");\n\t\t\t\t})\n\t\t\t},\n\t\t\texitLeft: true\n\t\t}));\n\t}\n\n\tbroadcast = () => {\n\t\t//TODO\n\t\t// :search = search.code\n\t\tthis.setState(({ search }) => ({\n\t\t\tsearch: {\n\t\t\t\t...search,\n\t\t\t\tbroadcasted: fetch(`/api/searches/:search/broadcast`, {\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tposition: null\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"post\"\n\t\t\t\t}) // TODO: correct url\n\t\t\t\t\t.then(({ success }) =>\n\t\t\t\t\t\tthis.setState(({ search }) => ({\n\t\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\t\t...search,\n\t\t\t\t\t\t\t\tbroadcasted: success\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))\n\t\t\t\t\t)\n\t\t\t}\n\t\t}));\n\t};\n\n\tback = () => this.setTab(this.state.tab - 1);\n\tnext = () => this.setTab(this.state.tab + 1);\n\tsetTab = tab => {\n\t\tthis.setState({ reverse: tab < this.state.tab, ptab: this.state.tab });\n\t\tif (tab === -1) return this.props.setCreateModal(false);\n\t\tif (tab === this.tabNames.length) {\n\t\t\tthis.props.setCreateModal(false);\n\t\t\tthis.setTab(0);\n\t\t\treturn;\n\t\t}\n\t\tif (tab === this.tabNames.indexOf(\"Share Search\")) this.createSearch();\n\t\tthis.setState({ tab });\n\t};\n\n\tgetData() {\n\t\tlet { contact, missing_names } = this.state;\n\t\treturn { contact, names: missing_names };\n\t}\n\n\trender() {\n\t\tlet { active, setCreateModal } = this.props;\n\t\tlet {\n\t\t\ttab,\n\t\t\tptab,\n\t\t\treverse,\n\t\t\tsearch,\n\t\t\texitLeft,\n\t\t\tmissing_names\n\t\t} = this.state;\n\t\tlet { setNames, setContact, next, back, broadcast } = this;\n\t\tlet tabs = {\n\t\t\t\"Enter Names\": () => (\n\t\t\t\t<AddNames next={next} back={back} names={missing_names} setNames={setNames} />\n\t\t\t),\n\t\t\t\"Add Information\": () => (\n\t\t\t\t<EnterInfo back={back} next={next} setContact={setContact} />\n\t\t\t),\n\t\t\t\"Share Search\": () => (\n\t\t\t\t<ShareSearch\n\t\t\t\t\tnext={next}\n\t\t\t\t\tsearch={search}\n\t\t\t\t\tbroadcast={broadcast}\n\t\t\t\t/>\n\t\t\t)\n\t\t};\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`modal modal-page  ${exitLeft ? \" exitLeft\" : \"\"} ${\n\t\t\t\t\tactive ? \"visible\" : \"\"\n\t\t\t\t}`}>\n\t\t\t\t<div className=\"modal-top-bar\">\n\t\t\t\t\t<i\n\t\t\t\t\t\tclassName=\"close modal-icon fa\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.setState({ tab: 0 });\n\t\t\t\t\t\t\tsetCreateModal(false);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t&times;\n\t\t\t\t\t</i>\n\t\t\t\t\t<div className=\"name\">Create Search</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t{tabs[this.tabNames[tab]]()}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"modal-bottom-bar tabs\">\n\t\t\t\t\t<div className=\"progress-container\">\n\t\t\t\t\t\t<div className=\"progressbar\">\n\t\t\t\t\t\t\t<div className=\"track\" />\n\t\t\t\t\t\t\t{this.tabNames.map((t, i) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\"create-modal-tab\" +\n\t\t\t\t\t\t\t\t\t\t` delay-${\n\t\t\t\t\t\t\t\t\t\t\treverse ? ptab - i : i - ptab - 1\n\t\t\t\t\t\t\t\t\t\t}` +\n\t\t\t\t\t\t\t\t\t\t(tab > i ? ` active` : \"\") +\n\t\t\t\t\t\t\t\t\t\t(tab === i ? \" current\" : \"\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() => this.setTab(i)}>\n\t\t\t\t\t\t\t\t\t{t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(\n\t({ ui: { modal: { create } = {} } = {} }) => ({ create }),\n\t{ setCreateModal, setSearch, setPage }\n)(Create);\n","import L from \"leaflet\";\nimport React, { Fragment, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setPersonModal } from \"../actions/ui.js\";\n\nlet map;\nlet polyline;\nlet marker;\nconst last = a => a[a.length - 1];\n\nfunction PersonModal({\n\tperson_info,\n\tcurrentSearch,\n\tcurrentPerson,\n\tsetPersonModal\n}) {\n\tuseEffect(() => {\n\t\tmap = L.map(\"person-map\", {\n\t\t\tzoomControl: false,\n\t\t\tattributionControl: false,\n\t\t\tdragging: false\n\t\t});\n\t\t[\n\t\t\tL.tileLayer(\n\t\t\t\t\"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}\",\n\t\t\t\t{\n\t\t\t\t\tmaxZoom: 18,\n\t\t\t\t\tid: \"mapbox.streets\",\n\t\t\t\t\taccessToken:\n\t\t\t\t\t\t\"pk.eyJ1Ijoiam9kcml0aXJrb2Rlc296Y29tIiwiYSI6ImNqeWcybGt4bTFpZ2EzbHFvZWlzbjF6cXIifQ.y13rgUritqRVVew3pyfC_g\"\n\t\t\t\t}\n\t\t\t)\n\t\t].forEach(x => x.addTo(map));\n\t\tpolyline = L.polyline([]).addTo(map);\n\t\tmarker = L.marker([]).addTo(map);\n\t\t\n\t\t// map.setView([1, 1]);\n\t}, []);\n\n\tlet searchTrails = currentSearch && currentSearch.trails;\n\n\tuseEffect(() => {\n\t\tif (currentPerson !== null && searchTrails !== null) {\n\t\t\tconst trail = searchTrails[currentPerson];\n\t\t\tconst lastPoint = trail && last(trail);\n\t\t\tpolyline.setLatLngs(trail || []);\n\t\t\t\n\t\t\tif (lastPoint) {\n                marker.setLatLng(lastPoint);\n                map.setView(lastPoint, 20);\n            }\n\t\t}\n\t}, [currentPerson, searchTrails]);\n\n\tlet body = person => {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"name-bar\">\n\t\t\t\t\t<div className=\"contact-name\">{person.name}</div>\n\t\t\t\t\t<div className=\"contact-team\">Team {person.team}</div>\n\t\t\t\t</div>\n\t\t\t\t<dl>\n\t\t\t\t\t<dt>Email</dt>\n\t\t\t\t\t<dd>asdf@gmail.com</dd>\n\t\t\t\t\t<dt>Phone Number</dt>\n\t\t\t\t\t<dd>(123)-456-7890</dd>\n\t\t\t\t</dl>\n\t\t\t\t<div className=\"row space-evenly person-actions\">\n\t\t\t\t\t<button className=\"button\">Cancel</button>\n\t\t\t\t\t<button className=\"button\">Message</button>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\t\"modal modal-page person-modal\" +\n\t\t\t\t(person_info ? \" visible\" : \"\")\n\t\t\t}>\n\t\t\t<div className=\"modal-head\">\n\t\t\t\t<div className=\"person-top-bar\">\n\t\t\t\t\t<i\n\t\t\t\t\t\tclassName=\"fa fa-arrow-left\"\n\t\t\t\t\t\tonClick={() => setPersonModal(false)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"person-map\" />\n\t\t\t</div>\n\t\t\t<div className=\"modal-content\">\n\t\t\t\t{currentPerson === null\n\t\t\t\t\t? null\n\t\t\t\t\t: body(currentSearch.people[currentPerson])}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName=\"modal-bottom-bar\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsetPersonModal(false);\n\t\t\t\t}}>\n\t\t\t\t<i className=\"close modal-icon fa\">&times;</i> Exit\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default connect(\n\t({\n\t\tui: { modal: { person_info } = {} } = {},\n\t\tsearches: { currentSearch, currentPerson }\n\t}) => ({ person_info, currentSearch, currentPerson }),\n\t{ setPersonModal }\n)(PersonModal);\n","import jsQR from \"jsqr\";\nimport React, { Component, Fragment } from \"react\";\nimport QrReader from \"react-qr-scanner\";\nimport { connect } from \"react-redux\";\nimport { setSearch } from \"../actions/searches.js\";\nimport { setPage, setQRModal } from \"../actions/ui.js\";\nimport fetch from \"../fakeServer.js\";\nimport { createLabel } from \"../util.js\";\n\nconst getQRCode = dataUrl =>\n\tnew Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.src = dataUrl;\n\t\timg.onload = () => {\n\t\t\tconst c = document.createElement(\"canvas\");\n\t\t\tc.width = img.width;\n\t\t\tc.height = img.height;\n\t\t\tconst ctx = c.getContext(\"2d\");\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t\tconst imageData = ctx.getImageData(0, 0, img.width, img.height);\n\t\t\tconst res = jsQR(imageData.data, img.width, img.height);\n\t\t\tif (res === null) {\n\t\t\t\treject();\n\t\t\t} else {\n\t\t\t\tresolve(res);\n\t\t\t}\n\t\t};\n\t});\n\nclass QRModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdelay: 500,\n\t\t\ttype: \"video\",\n\t\t\tuploaded_image: \"\",\n\t\t\tsearchError: false,\n\t\t\tresult: null,\n\t\t\tsearch: null,\n\t\t\texitLeft: false\n\t\t};\n\t\tthis.tabNames = [\"Enter Names\", \"Add Information\", \"Share Search\"];\n\t}\n\n\treset() {\n\t\tthis.setState({\n\t\t\tuploaded_image: \"\",\n\t\t\tsearchError: false,\n\t\t\tresult: null,\n\t\t\tsearch: null\n\t\t});\n\t}\n\n\thandleError = err => {\n\t\tthis.setState({\n\t\t\ttype: \"capture-error\"\n\t\t});\n\t};\n\thandleScan = result => {\n\t\tthis.handleResult(result);\n\t};\n\thandleResult(result) {\n\t\tthis.setState({ result });\n\t\tfetch(\"/api/searches/:search\") // TODO: Replace with real\n\t\t\t.then(data => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tsearch: data,\n\t\t\t\t\tsearchError: \"\"\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tsearch: null,\n\t\t\t\t\tsearchError: err.err\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\thandleImgUpload = evt => {\n\t\tthis.reset();\n\t\tlet files = evt.target.files;\n\t\tif (files && files[0]) {\n\t\t\tlet fileReader = new FileReader();\n\t\t\tfileReader.onloadend = e => {\n\t\t\t\tlet uploaded_image = e.target.result;\n\t\t\t\tthis.setState({\n\t\t\t\t\tuploaded_image\n\t\t\t\t});\n\t\t\t\tgetQRCode(uploaded_image)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.handleResult(res.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\ttype: \"upload-error\"\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t};\n\t\t\tfileReader.readAsDataURL(files[0]);\n\t\t\tthis.setState({ type: \"uploaded\" });\n\t\t}\n\t};\n\n\trender() {\n\t\tlet { active, setQRModal, setSearch, setPage } = this.props;\n\t\tlet {\n\t\t\ttype,\n\t\t\tuploaded_image,\n\t\t\tresult,\n\t\t\tsearch,\n\t\t\tsearchError,\n\t\t\texitLeft\n\t\t} = this.state;\n\t\tlet previewStyle = {\n\t\t\twidth: \"100%\"\n\t\t};\n\n\t\tlet states = {\n\t\t\tvideo: () => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<QrReader\n\t\t\t\t\t\tdelay={this.state.delay}\n\t\t\t\t\t\tstyle={previewStyle}\n\t\t\t\t\t\tonError={this.handleError}\n\t\t\t\t\t\tonScan={this.handleScan}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"box-container absolute\">\n\t\t\t\t\t\t<div className=\"box-child box-child-1\" />\n\t\t\t\t\t\t<div className=\"box-child box-child-2\" />\n\t\t\t\t\t\t<div className=\"box-child box-child-3\" />\n\t\t\t\t\t\t<div className=\"box-child box-child-4\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tuploaded: () => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={uploaded_image}\n\t\t\t\t\t\tstyle={previewStyle}\n\t\t\t\t\t\talt=\"QR code\"\n\t\t\t\t\t/>\n\t\t\t\t\t{search ? (\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetSearch(search);\n\t\t\t\t\t\t\t\t\tsetPage(\"search\");\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\texitLeft: true\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tsetQRModal(false);\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tSearch for {createLabel(search.names)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t) : searchError ? (\n\t\t\t\t\t\t<p>No search with code: '{result}'</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<i className=\"fa fa-sync spinning\" />\n\t\t\t\t\t\t\t{result ? \" Fetching Search...\" : \" Scanning...\"}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\t\"capture-error\": () => <p>There was an error capturing video</p>,\n\t\t\t\"upload-error\": () => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={uploaded_image}\n\t\t\t\t\t\tstyle={previewStyle}\n\t\t\t\t\t\talt=\"QR code\"\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t\t<p>No QR code found</p>\n\t\t\t\t</Fragment>\n\t\t\t)\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`modal modal-page ${exitLeft ? \" exitLeft\" : \"\"} ${\n\t\t\t\t\tactive ? \"visible\" : \"\"\n\t\t\t\t}`}>\n\t\t\t\t<div className=\"modal-top-bar\">\n\t\t\t\t\t<i\n\t\t\t\t\t\tclassName=\"close modal-icon fa\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetQRModal(false);\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\ttype: \"video\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t&times;\n\t\t\t\t\t</i>\n\t\t\t\t\t<div className=\"name\">Scan QR</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"modal-content no-padding relative\">\n\t\t\t\t\t<div className=\"center column relative\">\n\t\t\t\t\t\t{active ? states[type]() : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t{[\"video\", \"capture-error\"].includes(type) ? (\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName=\"button qr-action upload-qr-img\"\n\t\t\t\t\t\t\thtmlFor=\"qr-input\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tname=\"\"\n\t\t\t\t\t\t\t\tid=\"qr-input\"\n\t\t\t\t\t\t\t\tonChange={this.handleImgUpload}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<i className=\"fa fa-upload\" /> Upload\n\t\t\t\t\t\t</label>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"button qr-action\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\t\t\tthis.setState({ type: \"video\" });\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tSwitch to video\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(\n\t({ ui: { modal: { create } = {} } = {} }) => ({ create }),\n\t{ setQRModal, setSearch, setPage }\n)(QRModal);\n","import React from \"react\";\nexport default function({proximal}){\n    return <div>\n        {Array.isArray(proximal) ? \n        proximal.map((p, i) => \n            <div className=\"proximal-card\" key={i}>\n                <div className=\"name\">{p.name}</div>\n                <div className=\"dist\">{p.dist}</div>\n                <div className=\"icon\"><i className=\"fa fa-arrow-right\"></i></div>\n            </div>\n        ) : <p><i className=\"fa fa-sync spinning\"></i> Loading</p>}\n    </div>\n}","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setPersonModal } from \"../actions/ui\";\nimport { setPerson } from \"../actions/searches\";\n\nlet dist = (a, b) => Math.sqrt((a[0] - b[0]) ** 2 + (a[1] - b[1]) ** 2);\nlet PersonDisplay = ({\n\tperson,\n\tlocation,\n\tcurrentLocation,\n\tsetPersonModal,\n\tsetPerson,\n\tid\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"person-display\"\n\t\t\tonClick={() => {\n\t\t\t\tsetPerson(id);\n\t\t\t\tsetPersonModal(true);\n\t\t\t}}>\n\t\t\t<div className=\"person-name\">{person.name}</div>\n\t\t\t<div className=\"person-location\">\n\t\t\t\t{location && currentLocation\n\t\t\t\t\t? dist(location, currentLocation) / 69 + \" miles\"\n\t\t\t\t\t: \"\"}\n\t\t\t</div>\n\t\t\t<div className=\"go-to\">\n\t\t\t\t<i className=\"fa fa-arrow-right\" />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t() => ({}),\n\t{ setPersonModal, setPerson }\n)(PersonDisplay);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getProximalSearches } from \"../actions/searches.js\";\nimport { setCodeModal, setCreateModal, setQRModal } from \"../actions/ui.js\";\nimport { ProximalList } from \"../components/index.js\";\n\nclass Landing extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconsole.log(props);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getProximalSearches();\n\t}\n\n\trender() {\n\t\tlet { proximal } = this.props;\n\t\treturn (\n\t\t\t<div className=\"page landing\">\n\t\t\t\t<div className=\"background-map\">\n\t\t\t\t\t<div className=\"map-actions\">\n\t\t\t\t\t\t<h2 className=\"title center\">Create Search</h2>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => this.props.setCreateModal(true)}\n\t\t\t\t\t\t\tclassName=\"button\">\n\t\t\t\t\t\t\t+ Create\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"non-map-actions\">\n\t\t\t\t\t\t<h2 className=\"title center\">Join Search</h2>\n\t\t\t\t\t\t<div className=\"row space-around\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => this.props.setQRModal(true)}>\n\t\t\t\t\t\t\t\tScan QR\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => this.props.setCodeModal(true)}>\n\t\t\t\t\t\t\t\tInput Code\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className=\"title center\">Proximal</h3>\n\t\t\t\t\t\t<ProximalList proximal={proximal} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(\n\t({ searches: { proximal } }) => {\n\t\treturn { proximal };\n\t},\n\t{ getProximalSearches, setCreateModal, setQRModal, setCodeModal }\n)(Landing);\n","import React, { forwardRef } from \"react\";\n\nexport default forwardRef((props, ref) => {\n\treturn (\n\t\t<div ref={ref} className=\"tab-page guide-page\">\n\t\t\t<iframe\n\t\t\t\tkey=\"quide-frame\"\n\t\t\t\tclassName=\"guide-embed\"\n\t\t\t\tsrc=\"http://www.missingpersonsguide.com/guide/\"\n\t\t\t\tframeBorder=\"0\"\n\t\t\t\ttitle=\"guide\"\n\t\t\t/>\n\t\t\t<div className=\"guide-loader\">\n\t\t\t\t<p>\n\t\t\t\t\t<i className=\"fa fa-sync spinning\" /> Loading\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n})\n","import L from \"leaflet\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { sendLocation } from \"../actions/searches.js\";\n\nclass Map extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmap: null,\n\t\t\tmapLoaded: false\n\t\t};\n\t\tthis.watchId = null;\n\t\tthis.timeoutId = null;\n\t\tthis.polylines = {};\n\t\twindow.logThis = () => console.log(this);\n\t}\n\n\tsuccess = ({ coords }) => {\n\t\tthis.props.sendLocation(coords, this.props.currentSearch.currentUser);\n\t};\n\terror = error => {};\n\n\tcomponentDidMount() {\n\t\tconst options = {\n\t\t\tenableHighAccuracy: true,\n\t\t\ttimeout: 5000,\n\t\t\tmaximumAge: 5000\n\t\t};\n\t\tthis.watchId = navigator.geolocation.watchPosition(\n\t\t\tthis.success,\n\t\t\tthis.error,\n\t\t\toptions\n\t\t);\n\n\t\tthis.map = L.map(\"mapid\", {\n\t\t\tzoomControl: false\n\t\t});\n\t\tthis.map.setView(this.props.currentSearch.center, 20);\n\t\t[\n\t\t\tL.tileLayer(\n\t\t\t\t\"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}\",\n\t\t\t\t{\n\t\t\t\t\tattribution:\n\t\t\t\t\t\t'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n\t\t\t\t\tmaxZoom: 18,\n\t\t\t\t\tid: \"mapbox.streets\",\n\t\t\t\t\taccessToken:\n\t\t\t\t\t\t\"pk.eyJ1Ijoiam9kcml0aXJrb2Rlc296Y29tIiwiYSI6ImNqeWcybGt4bTFpZ2EzbHFvZWlzbjF6cXIifQ.y13rgUritqRVVew3pyfC_g\"\n\t\t\t\t}\n\t\t\t),\n\t\t\tL.control.zoom({\n\t\t\t\tposition: \"bottomright\"\n\t\t\t})\n\t\t].forEach(x => x.addTo(this.map));\n\t}\n\n\tcomponentDidUpdate() {\n\t\tlet { trails } = this.props.currentSearch;\n\t\tfor (let i in trails) {\n\t\t\tif (this.polylines.hasOwnProperty(i)) {\n\t\t\t\tthis.polylines[i].addLatLng(trails[i][trails[i].length - 1]);\n\t\t\t} else {\n\t\t\t\tthis.polylines[i] = L.polyline(trails[i], {\n\t\t\t\t\tcolor: \"red\"\n\t\t\t\t});\n\t\t\t\tthis.polylines[i].addTo(this.map);\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn <div id=\"mapid\" key=\"map\" />;\n\t}\n}\n\nexport let MapPage = connect(\n\t({ searches: { currentSearch } }) => ({ currentSearch }),\n\t{ sendLocation }\n)(Map);\n","import React, { forwardRef } from \"react\";\n\nexport default forwardRef((props, ref) => {\n\treturn <div ref={ref} className=\"tab-page media-page\" />;\n});\n","import React, { Component, forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport fetch from \"../fakeServer\";\n\nfunction ChatName({ chat, openChat }) {\n\treturn (\n\t\t<div className=\"chat-display\" onClick={() => openChat(chat)}>\n\t\t\t<div className=\"person-name\">\n\t\t\t\t{Object.values(chat.users).join(\", \")}\n\t\t\t</div>\n\t\t\t<div className=\"go-to\">\n\t\t\t\t<i className=\"fa fa-arrow-right\" />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nfunction ChatList({ loading, chats, openChat }) {\n\treturn (\n\t\t<div className=\"chat-list\">\n\t\t\t<h3 className=\"title\">Chats</h3>\n\t\t\t{loading ? (\n\t\t\t\t<p>\n\t\t\t\t\t<i className=\"fa fa-sync spinning\" /> Loading\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\tObject.entries(chats).map(([id, chat]) => (\n\t\t\t\t\t<ChatName\n\t\t\t\t\t\tkey={\"chat-\" + id}\n\t\t\t\t\t\tchat={chat}\n\t\t\t\t\t\topenChat={openChat}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction ChatView({ chat, closeChat, currentUser }) {\n\treturn (\n\t\t<div className=\"chat-view\">\n\t\t\t<h3 className=\"top-row\">\n\t\t\t\t<i className=\"fa fa-arrow-left\" onClick={closeChat} /> Chat\n\t\t\t</h3>\n\t\t\t{chat\n\t\t\t\t? chat.messages.map((message, i) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"line\" +\n\t\t\t\t\t\t\t\t(message.sender === currentUser ? \" self\" : \"\")\n\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t<div className=\"message\">{message.text}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t  ))\n\t\t\t\t: null}\n\t\t\t<div className=\"bottom-input\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Message\"\n\t\t\t\t\tclassName=\"bottom-text-input\"\n\t\t\t\t/>\n\t\t\t\t<button>\n\t\t\t\t\t<i className=\"fa fa-paper-plane\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nclass MessagesPage extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tchats: {},\n\t\t\tchatOrder: [],\n\t\t\tcurrentChat: null,\n\t\t\tuser: props.authCode,\n\t\t\tstate: \"initial\",\n\t\t\tpage: \"chat-list\"\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({ state: \"loading\" });\n\t\tfetch(\"/api/searches/:search/chats\")\n\t\t\t.then(chats => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tchats,\n\t\t\t\t\tstate: \"loaded\"\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(data => {});\n\t}\n\n\topenChat = currentChat => {\n\t\tthis.setState({\n\t\t\tpage: \"chat-view\",\n\t\t\tcurrentChat\n\t\t});\n\t};\n\n\tcloseChat = () => {\n\t\tthis.setState({\n\t\t\tpage: \"chat-list\"\n\t\t});\n\t\tsetTimeout(\n\t\t\t() =>\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrentChat: null\n\t\t\t\t}),\n\t\t\t200\n\t\t);\n\t};\n\n\trender() {\n\t\tlet { currentChat, state, chats, page } = this.state;\n\t\tlet { openChat, closeChat } = this;\n\t\tlet { currentUser } = this.props.currentSearch;\n\t\treturn (\n\t\t\t<div ref={this.props.tabRef} className=\"tab-page chat-page\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t\"chat-area\" + (page === \"chat-view\" ? \" alt\" : \"\")\n\t\t\t\t\t}>\n\t\t\t\t\t<ChatList\n\t\t\t\t\t\tloading={state === \"loading\"}\n\t\t\t\t\t\tchats={chats}\n\t\t\t\t\t\topenChat={openChat}\n\t\t\t\t\t/>\n\t\t\t\t\t<ChatView\n\t\t\t\t\t\tchat={currentChat}\n\t\t\t\t\t\tcloseChat={closeChat}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst Connected = \n\tconnect(\n\t\t({ searches: { currentSearch } }) => ({ currentSearch }),\n\t\t{}\n\t)(MessagesPage)\n\nexport default forwardRef((props, ref) => (\n\t<Connected {...props} tabRef={ref} />\n));\n","import React, { forwardRef, useState } from \"react\";\nimport NameList from \"../components/NameList.js\";\n\nexport default forwardRef((props, ref) => {\n\tlet [names, setNames] = useState([]);\n\treturn (\n\t\t<div ref={ref} className=\"tab-page search-page\">\n\t\t\t<h3 className=\"title\">Settings</h3>\n\t\t\t<div className=\"settings-card\">\n\t\t\t\t<h4 className=\"title setting-title\">Missing Names</h4>\n\t\t\t\t<NameList names={names} setNames={setNames} />\n\t\t\t</div>\n\t\t\t<div className=\"settings-card\">\n\t\t\t\t<h4 className=\"title setting-title\">Contact Info</h4>\n\t\t\t\t{/* TODO */}\n\t\t\t</div>\n\t\t\t<div className=\"settings-card\">\n\t\t\t\t<h4 className=\"title setting-title\">Poster</h4>\n\t\t\t\t<div className=\"qr-spacer\">\n\t\t\t\t\tasdf <br /> asdf\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"settings-card\">\n\t\t\t\t<h4 className=\"title setting-title\">Sharing</h4>\n\t\t\t\t<div className=\"qr-spacer\">\n\t\t\t\t\t{\" \"}\n\t\t\t\t\tasdf <br /> asdf\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n});","import React, { forwardRef, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { PersonDisplay } from \"../components/index\";\n\nlet last = a => a[a.length - 1];\n\nfunction TeamPage({ currentSearch, myRef }) {\n\tconst { currentUser, teams, people, trails, director } = currentSearch;\n\tconst currentTeamId = people[currentUser].team;\n\tconst currentTeam = teams[currentTeamId];\n\tconst currentLocation = last(trails[currentUser] || [null]);\n\treturn (\n\t\t<div ref={myRef} className=\"tab-page team-page\">\n\t\t\t<h3>Director</h3>\n\t\t\t<div className=\"team-list\">\n\t\t\t\t<PersonDisplay\n\t\t\t\t\tperson={people[director]}\n\t\t\t\t\tlocation={last(trails[director] || [null])}\n\t\t\t\t\tcurrentLocation={currentLocation}\n\t\t\t\t\tid={director}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<h3>My Team</h3>\n\t\t\t<div className=\"team-list\">\n\t\t\t\t{currentTeam.map(p => (\n\t\t\t\t\t<PersonDisplay\n\t\t\t\t\t\tkey={\"person-\" + p}\n\t\t\t\t\t\tperson={people[p]}\n\t\t\t\t\t\tlocation={last(trails[p] || [null])}\n\t\t\t\t\t\tcurrentLocation={currentLocation}\n\t\t\t\t\t\tid={p}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t{teams.map((team, i) =>\n\t\t\t\ti === currentTeamId ? null : (\n\t\t\t\t\t<Fragment key={\"team-\"+i}>\n\t\t\t\t\t\t<h3>Team {i + 1}</h3>\n\t\t\t\t\t\t<div className=\"team-list\">\n\t\t\t\t\t\t\t{team.map(p => (\n\t\t\t\t\t\t\t\t<PersonDisplay\n\t\t\t\t\t\t\t\t\tkey={\"person-\" + p}\n\t\t\t\t\t\t\t\t\tperson={people[p]}\n\t\t\t\t\t\t\t\t\tlocation={last(trails[p] || [null])}\n\t\t\t\t\t\t\t\t\tcurrentLocation={currentLocation}\n\t\t\t\t\t\t\t\t\tid={p}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nconst Connected = connect(\n\t({ searches: { currentSearch } }) => ({ currentSearch }),\n\t{}\n)(TeamPage);\n\nexport default forwardRef((props, ref) => <Connected {...props} myRef={ref} />);\n","import React, { createRef, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setSidebar } from \"../actions/ui\";\nimport { createLabel, useScroll } from \"../util\";\nimport GuidePage from \"./GuidePage\";\nimport { MapPage } from \"./MapPage\";\nimport TimelinePage from \"./MediaPage\";\nimport MessagesPage from \"./MessagesPage\";\nimport SettingsPage from \"./SettingsPage\";\nimport TeamPage from \"./TeamPage\";\n\nlet pointerTimeout;\n\nconst tabNames = [\"team\", \"chat\", \"media\", \"settings\", \"guide\"];\nconst tabIcons = [\n\t\"fa-users\",\n\t\"fa-comment-alt\",\n\t\"fa-photo-video\",\n\t\"fa-cog\",\n\t\"fa-question\"\n];\nconst tabComponents = [\n\tTeamPage,\n\tMessagesPage,\n\tTimelinePage,\n\tSettingsPage,\n\tGuidePage\n];\n\nconst refs = tabNames.map(() => createRef());\n\nconst tabParentRef = createRef();\nconst scrollers = refs.map(ref => useScroll(tabParentRef, ref, \"h\")[0]);\n\nconst mapParentRef = createRef();\nconst [execScroll, scrollProps] = useScroll(mapParentRef, \"v\");\n\nconst SearchPage = ({ setSidebar, currentSearch }) => {\n\tconst [tab, setTab] = useState(0);\n\tconst [pointerEvents, setPointerEvents] = useState(false);\n\n\tconst tabs = tabComponents.map((TabComponent, i) => (\n\t\t<TabComponent key={\"tab-\" + i} ref={refs[i]} />\n\t));\n\n\tconst tabButtons = tabNames.map((t, i) => (\n\t\t<div\n\t\t\tkey={i}\n\t\t\tclassName={\"tab\" + (i === tab ? \" active\" : \"\")}\n\t\t\tonClick={() => {\n\t\t\t\tscrollers[i]();\n\t\t\t}}>\n\t\t\t<i className={\"fa \" + tabIcons[i]} />\n\t\t\t{t}\n\t\t</div>\n\t));\n\n\tconst getCurrentTab = () =>\n\t\trefs\n\t\t\t.map(({ current }, i) => [\n\t\t\t\tcurrent !== null && tabParentRef.current !== null\n\t\t\t\t\t? Math.abs(\n\t\t\t\t\t\t\tcurrent.offsetLeft - tabParentRef.current.scrollLeft\n\t\t\t\t\t  )\n\t\t\t\t\t: Infinity,\n\t\t\t\ti\n\t\t\t])\n\t\t\t.sort(([a], [b]) => a - b)[0][1];\n\n\tuseEffect(() => {\n\t\tif (tabParentRef.current && refs[0].current) {\n\t\t\ttabParentRef.current.addEventListener(\n\t\t\t\t\"scroll\",\n\t\t\t\t() => setTab(getCurrentTab()),\n\t\t\t\t{ passive: true }\n\t\t\t);\n\t\t}\n\t}, []);\n\n\tlet onTouchStart = () => {\n\t\tclearTimeout(pointerTimeout);\n\t\tpointerTimeout = undefined;\n\t\tsetPointerEvents(true);\n\t};\n\tlet onTouchEnd = () => {\n\t\tpointerTimeout = setTimeout(() => {\n\t\t\tsetPointerEvents(false);\n\t\t}, 750);\n\t};\n\tlet touchProps = {\n\t\tonTouchStart,\n\t\tonTouchEnd\n\t};\n\n\treturn (\n\t\t<div className=\"page-search\">\n\t\t\t<div className=\"page-name\">\n\t\t\t\t<i\n\t\t\t\t\tclassName=\"fa fa-bars modal-icon\"\n\t\t\t\t\tonClick={() => setSidebar(true)}\n\t\t\t\t/>{\" \"}\n\t\t\t\tSearch\n\t\t\t</div>\n\t\t\t<div className=\"map-bg\">\n\t\t\t\t<MapPage />\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tref={mapParentRef}\n\t\t\t\tclassName={\n\t\t\t\t\t\"map-content\" + (pointerEvents ? \"\" : \" no-pointer-events\")\n\t\t\t\t}>\n\t\t\t\t<div className=\"map-spacer\" {...touchProps} />\n\t\t\t\t<div className=\"content-tabs\" {...touchProps} {...scrollProps}>\n\t\t\t\t\t<div className=\"search-header\" onClick={execScroll}>\n\t\t\t\t\t\tSearch for {createLabel(currentSearch.names)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tab-content\" ref={tabParentRef}>\n\t\t\t\t\t\t<div className=\"all-tabs\">{tabs}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tabs row space-evenly\">{tabButtons}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"map-actions\">\n\t\t\t\t<button className=\"\">\n\t\t\t\t\t<i className=\"fa fa-plus\" />\n\t\t\t\t</button>\n\t\t\t\t<button className=\"\">\n\t\t\t\t\t<i className=\"fa fa-bookmark\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nexport default connect(\n\t({ searches: { currentSearch } }) => ({ currentSearch }),\n\t{ setSidebar }\n)(SearchPage);\n","import React from \"react\";\nexport function Sidebar({ children, active, setSidebar }) {\n\treturn (\n\t\t<div className={\"sidebar\" + (active ? \" active\" : \"\")}>\n\t\t\t<div className=\"sidebar-top-bar\">\n\t\t\t\t<i\n\t\t\t\t\tclassName=\"fa sidebar-icon\"\n\t\t\t\t\tonClick={() => setSidebar(false)}>\n\t\t\t\t\t&times;\n\t\t\t\t</i>{\" \"}\n\t\t\t\tMenu\n\t\t\t</div>\n\t\t\t<div className=\"sidebar-content\" />\n\t\t</div>\n\t);\n}\n","import React, { Component, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setSidebar } from \"./actions/ui.js\";\nimport \"./App.scss\";\nimport CodeModal from \"./pages/CodeModal\";\nimport Create from \"./pages/Create.js\";\nimport QRModal from \"./pages/InputQR.js\";\nimport Landing from \"./pages/Landing.js\";\nimport PersonModal from \"./pages/PersonModal.js\";\nimport SearchPage from \"./pages/SearchPage.js\";\nimport { Sidebar } from \"./pages/Sidebar\";\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tlet loader = document.getElementById(\"loader\");\n\t\tloader.parentNode.removeChild(loader);\n\t}\n\trender() {\n\t\tlet {\n\t\t\tsetSidebar,\n\t\t\tsidebar,\n\t\t\tpage,\n\t\t\tcreate,\n\t\t\tscan_qr,\n\t\t\tshare_code,\n\t\t\tperson_info\n\t\t} = this.props;\n\t\tlet currentPage = {\n\t\t\tlanding: <Landing />,\n\t\t\tsearch: <SearchPage />\n\t\t}[page];\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Sidebar active={sidebar} setSidebar={setSidebar} />\n\t\t\t\t<Create active={create} />\n\t\t\t\t<QRModal active={scan_qr} />\n\t\t\t\t<CodeModal active={share_code} />\n\t\t\t\t<PersonModal active={person_info} />\n\t\t\t\t{currentPage}\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default connect(\n\t({\n\t\tui: {\n\t\t\tsidebar,\n\t\t\tname,\n\t\t\tpage,\n\t\t\tmodal: { create, scan_qr, share_code, person_info }\n\t\t}\n\t}) => ({\n\t\tsidebar,\n\t\tname,\n\t\tpage,\n\t\tcreate,\n\t\tscan_qr,\n\t\tshare_code,\n\t\tperson_info\n\t}),\n\t{ setSidebar }\n)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export default (obj, initialState) => (state = initialState, action) =>\n\t(obj[action.type] || obj._ || (a => state))(action, state);","import reducerFromObject from \"./reducerFromObject.js\";\nlet initalState = {\n    sidebar: false,\n    name: \"\",\n    page: \"landing\",\n    modal: {\n        create: false,\n        scan_qr: false,\n        share_code: false,\n        person_info: false,\n    }\n};\nlet a = reducerFromObject({\n    SET_SIDEBAR: (action, state) => ({\n        ...state,\n        sidebar: action.value,\n    }),\n    SET_NAME: (action, state) => ({\n        ...state,\n        name: action.value,\n    }),\n    SET_MODAL: (action, state) => ({\n        ...state,\n        modal: {\n            ...state.modal,\n            [action.modal]: action.value,\n        }\n    }),\n    SET_PAGE: ({page}, state) => ({\n        ...state,\n        page,\n    })\n}, initalState);\nconsole.log(a);\nexport default a;","import reducerFromObject from \"./reducerFromObject.js\";\nlet initialSearchState = {};\nlet initialState = {\n\tproximal: [],\n\tcurrentPerson: null,\n\tcurrentSearch: null\n};\nlet a = reducerFromObject(\n\t{\n\t\tREQUEST_PROXIMAL: (action, state) => ({\n\t\t\t...state,\n\t\t\tproximal: action.promise\n\t\t}),\n\t\tUPDATE_PROXIMAL: (action, state) => ({\n\t\t\t...state,\n\t\t\tproximal: action.data\n\t\t}),\n\t\tSET_SEARCH: (action, state) => ({\n\t\t\t...state,\n\t\t\tcurrentSearch: {\n\t\t\t\t...initialSearchState,\n\t\t\t\t...action.data\n\t\t\t}\n\t\t}),\n\t\tSET_PERSON: (action, state) => ({\n\t\t\t...state,\n\t\t\tcurrentPerson: action.data,\n\t\t}),\n\t\tUPDATE_USER_POSITION: (action, state) => {\n\t\t\tlet { currentSearch } = state;\n\t\t\tlet {\n\t\t\t\tuser,\n\t\t\t\tlocation: { longitude, latitude }\n\t\t\t} = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentSearch: {\n\t\t\t\t\t...currentSearch,\n\t\t\t\t\ttrails: {\n\t\t\t\t\t\t...currentSearch.trails,\n\t\t\t\t\t\t[action.payload.user]: [\n\t\t\t\t\t\t\t...(currentSearch.trails[user] || []),\n\t\t\t\t\t\t\t[latitude, longitude]\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tinitialState\n);\nconsole.log(a);\nexport default a;\n","import { combineReducers } from \"redux\";\n\nimport ui from \"./ui\";\nimport searches from \"./searches\";\nexport default combineReducers({\n\tui,\n\tsearches\n});\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers/root.js\";\nimport {socketMiddleware} from \"./fakeServer.js\";\n\nexport default createStore(\n    rootReducer,\n    applyMiddleware(thunk, socketMiddleware(\"localhost:3000\")),\n);\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport App from \"./App.js\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker.js\";\nimport store from \"./store.js\";\n\n// window.addEventListener(\n// \t\"beforeunload\",\n// \tfunction() {\n// \t\tdebugger;\n// \t},\n// \tfalse\n// );\n\nReactDOM.render(\n\t<Router>\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>\n\t</Router>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}